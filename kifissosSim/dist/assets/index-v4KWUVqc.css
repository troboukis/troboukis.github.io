*,*:before,*:after{box-sizing:border-box;margin:0;padding:0}:root{--color-bg-light: #F5F1E8;--color-bg-panel: rgba(255, 255, 255, .95);--color-bg-dark: #333333;--color-primary: #1a73e8;--color-secondary: #4285f4;--color-accent: #34a853;--color-warning: #fbbc04;--color-error: #ea4335;--color-text: #202124;--color-text-light: #ffffff;--color-text-muted: #5f6368;--color-road-motorway: #E8E8E8;--color-road-ramp: #D4D4D4;--color-road-trunk: #E0E0E0;--font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;--font-mono: "SF Mono", Monaco, "Courier New", monospace;--spacing-xs: 4px;--spacing-sm: 8px;--spacing-md: 16px;--spacing-lg: 24px;--spacing-xl: 32px;--radius-sm: 4px;--radius-md: 8px;--radius-lg: 16px;--shadow-sm: 0 2px 4px rgba(0, 0, 0, .2);--shadow-md: 0 4px 8px rgba(0, 0, 0, .3);--shadow-lg: 0 8px 16px rgba(0, 0, 0, .4);--transition-fast: .15s ease;--transition-normal: .25s ease}html,body{width:100%;height:100%;overflow:hidden;font-family:var(--font-main);font-size:16px;line-height:1.5;color:var(--color-text);background:var(--color-bg-light);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{overscroll-behavior:none;touch-action:pan-x pan-y}#app{width:100%;height:100%;position:relative;overflow:hidden}.map-container{width:100%;height:100%;position:relative;touch-action:none}.map-svg{display:block}.vehicle-canvas{pointer-events:none}#loading-screen{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--color-bg-light);z-index:1000;transition:opacity var(--transition-normal)}#loading-screen.hidden{opacity:0;pointer-events:none}#loading-screen p{margin-top:var(--spacing-md);color:var(--color-text-muted);font-size:14px}.loader{width:48px;height:48px;border:4px solid #e0e0e0;border-top-color:var(--color-primary);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.control-panel{position:absolute;bottom:0;left:0;right:0;background:var(--color-bg-panel);backdrop-filter:blur(10px);padding:var(--spacing-md);padding-bottom:calc(var(--spacing-md) + env(safe-area-inset-bottom,0));border-radius:var(--radius-lg) var(--radius-lg) 0 0;box-shadow:0 -4px 20px #0000001a;transform:translateY(100%);transition:transform var(--transition-normal);z-index:100}.control-panel.visible{transform:translateY(0)}.info-overlay{position:absolute;top:var(--spacing-md);top:calc(var(--spacing-md) + env(safe-area-inset-top,0));left:var(--spacing-md);right:var(--spacing-md);display:flex;justify-content:space-between;align-items:flex-start;pointer-events:none;z-index:50}.info-overlay>*{pointer-events:auto}.status-badge{background:var(--color-bg-panel);backdrop-filter:blur(10px);padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--radius-md);box-shadow:0 2px 8px #0000001a;font-size:12px;display:flex;align-items:center;gap:var(--spacing-sm);color:var(--color-text)}.status-badge .dot{width:8px;height:8px;border-radius:50%;background:var(--color-accent)}.status-badge .dot.loading{background:var(--color-warning);animation:pulse 1s ease infinite}.status-badge .dot.error{background:var(--color-error)}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}.zoom-controls{display:flex;flex-direction:column;gap:var(--spacing-xs)}.zoom-btn{width:40px;height:40px;border:none;border-radius:var(--radius-md);background:var(--color-bg-panel);backdrop-filter:blur(10px);color:var(--color-text);font-size:20px;font-weight:700;cursor:pointer;box-shadow:0 2px 8px #0000001a;transition:background var(--transition-fast);touch-action:manipulation}.zoom-btn:hover,.zoom-btn:active{background:var(--color-primary);color:var(--color-text-light)}.legend{position:absolute;bottom:var(--spacing-md);right:var(--spacing-md);background:var(--color-bg-panel);backdrop-filter:blur(10px);padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--radius-md);box-shadow:0 2px 8px #0000001a;font-size:11px;z-index:50;color:var(--color-text)}.legend-item{display:flex;align-items:center;gap:var(--spacing-sm);margin-bottom:var(--spacing-xs)}.legend-item:last-child{margin-bottom:0}.legend-color{width:16px;height:4px;border-radius:2px}@media (min-width: 768px){.control-panel{left:auto;right:var(--spacing-md);bottom:var(--spacing-md);width:320px;border-radius:var(--radius-lg);padding-bottom:var(--spacing-md)}.info-overlay{top:var(--spacing-lg);left:var(--spacing-lg);right:var(--spacing-lg)}.legend{bottom:var(--spacing-lg);right:var(--spacing-lg)}}@media (prefers-reduced-motion: reduce){*,*:before,*:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}@media (prefers-contrast: high){:root{--color-road-motorway: #d0d0d0;--color-road-ramp: #c0c0c0;--color-text: #000000}}@media (hover: none){.zoom-btn:active{transform:scale(.95)}}.panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}.panel-title{display:flex;align-items:center;gap:var(--spacing-sm);font-weight:600;font-size:14px}.panel-icon{font-size:18px}.panel-toggle{background:none;border:none;color:var(--color-primary);font-size:12px;cursor:pointer;padding:var(--spacing-xs)}.panel-content{display:flex;flex-direction:column;gap:var(--spacing-md)}.control-section{display:flex;flex-direction:column;gap:var(--spacing-sm)}.section-label{display:flex;justify-content:space-between;align-items:center;font-size:12px;color:var(--color-text-muted);text-transform:uppercase;letter-spacing:.5px}.value-display{color:var(--color-text);font-weight:500}.playback-controls{flex-direction:row;align-items:center;gap:var(--spacing-sm);padding-bottom:var(--spacing-sm);border-bottom:1px solid rgba(0,0,0,.1)}.btn{display:inline-flex;align-items:center;justify-content:center;width:44px;height:44px;border:none;border-radius:var(--radius-md);background:var(--color-primary);color:var(--color-text-light);font-size:18px;cursor:pointer;transition:background var(--transition-fast),transform var(--transition-fast);touch-action:manipulation}.btn:hover{background:var(--color-secondary)}.btn:active{transform:scale(.95)}.btn-reset{background:#e0e0e0;color:var(--color-text)}.speed-control{display:flex;align-items:center;gap:var(--spacing-xs);margin-left:auto;font-size:12px}.speed-select{background:#f0f0f0;border:1px solid #e0e0e0;border-radius:var(--radius-sm);color:var(--color-text);padding:var(--spacing-xs) var(--spacing-sm);font-size:12px}.metrics-display{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--spacing-sm);padding:var(--spacing-sm);background:#f5f5f5;border-radius:var(--radius-md)}.metric{display:flex;flex-direction:column;gap:2px}.metric-label{font-size:10px;color:var(--color-text-muted);text-transform:uppercase}.metric-value{font-size:14px;font-weight:600;font-family:var(--font-mono)}.congestion-bar{height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden;margin-top:4px}.bar-fill{height:100%;background:var(--color-accent);border-radius:4px;transition:width var(--transition-fast),background var(--transition-fast)}.scenario-buttons{display:flex;gap:var(--spacing-xs)}.scenario-btn{flex:1;padding:var(--spacing-sm) var(--spacing-xs);border:1px solid #e0e0e0;border-radius:var(--radius-md);background:transparent;color:var(--color-text-muted);font-size:12px;cursor:pointer;transition:all var(--transition-fast)}.scenario-btn.active{background:var(--color-primary);border-color:var(--color-primary);color:var(--color-text-light)}.scenario-btn:hover:not(.active){border-color:var(--color-primary);color:var(--color-text)}.slider{-webkit-appearance:none;appearance:none;width:100%;height:6px;background:#e0e0e0;border-radius:3px;outline:none}.slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;background:var(--color-primary);border-radius:50%;cursor:pointer;border:2px solid white;box-shadow:0 1px 3px #0003}.slider::-moz-range-thumb{width:20px;height:20px;background:var(--color-primary);border-radius:50%;cursor:pointer;border:2px solid white;box-shadow:0 1px 3px #0003}.slider-small{-webkit-appearance:none;appearance:none;width:80px;height:4px;background:#e0e0e0;border-radius:2px;outline:none}.slider-small::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:14px;height:14px;background:var(--color-primary);border-radius:50%;cursor:pointer;box-shadow:0 1px 3px #0003}.vehicle-mix{display:flex;flex-direction:column;gap:var(--spacing-xs)}.mix-item{display:flex;align-items:center;gap:var(--spacing-sm);font-size:12px}.mix-color{width:12px;height:12px;border-radius:2px}.mix-value{margin-left:auto;font-family:var(--font-mono);font-size:11px}.toggle-group{display:flex;flex-direction:column;gap:var(--spacing-sm)}.toggle{display:flex;align-items:center;gap:var(--spacing-sm);cursor:pointer;font-size:13px}.toggle input{display:none}.toggle-slider{position:relative;width:40px;height:22px;background:#d0d0d0;border-radius:11px;transition:background var(--transition-fast)}.toggle-slider:after{content:"";position:absolute;top:2px;left:2px;width:18px;height:18px;background:#fff;border-radius:50%;transition:transform var(--transition-fast);box-shadow:0 1px 3px #0003}.toggle input:checked+.toggle-slider{background:var(--color-primary)}.toggle input:checked+.toggle-slider:after{transform:translate(18px)}.toggle-label{color:var(--color-text-muted)}.control-panel.visible~.legend{bottom:calc(280px + var(--spacing-md))}@media (min-width: 768px){.control-panel.visible~.legend{bottom:var(--spacing-lg);right:calc(320px + var(--spacing-lg) + var(--spacing-md))}.metrics-display{grid-template-columns:repeat(4,1fr)}}
